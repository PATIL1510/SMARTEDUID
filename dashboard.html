<!DOCTYPE html>
<html>

<head>
    <title>Dashboard</title>
</head>

<body>

    <h2>Dashboard</h2>

    <div id="content"></div>
    <button onclick="logout()">Logout</button>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

    <script src="firebase.js"></script>

    <script>
        auth.onAuthStateChanged(user => {
            if (!user) window.location.href = "index.html";

            db.collection("users").doc(user.uid).get()
                .then(doc => {
                    const role = doc.data().role;
                    if (role === "teacher") {
                        window.location.href = "teacher.html";
                    } else {
                        window.location.href = "student.html";
                    }
                });
        });

        function logout() {
            auth.signOut().then(() => window.location.href = "index.html");
        }
    </script>

</body>

</html>